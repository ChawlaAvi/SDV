
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Inputting Business Logic Using Constraints &#8212; SDV 0.18.0 documentation</title>
    
  <link rel="stylesheet" href="../../_static/css/index.f658d18f9b420779cfdf24aa0a7e2d77.css">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sdv.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.d3f166471bb80abb5163.js">

    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    <link rel="shortcut icon" href="../../_static/SDV.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Custom Constraints" href="custom_constraints.html" />
    <link rel="prev" title="Constraints" href="constraints.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

    <a class="navbar-brand" href="../../index.html">
    
      <img src="../../_static/SDV.png" class="logo" alt="logo" />
    
    </a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-menu" aria-controls="navbar-menu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar-menu" class="col-lg-9 collapse navbar-collapse">
      <ul id="navbar-main-elements" class="navbar-nav mr-auto">
        
        
        <li class="nav-item ">
            <a class="nav-link" href="../../getting_started/index.html">Getting Started</a>
        </li>
        
        <li class="nav-item active">
            <a class="nav-link" href="../index.html">User Guides</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../api_reference/index.html">API Reference</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../developer_guides/index.html">Developer Guides</a>
        </li>
        
        <li class="nav-item ">
            <a class="nav-link" href="../../history.html">Release Notes</a>
        </li>
        
        
      </ul>


      

      <ul class="navbar-nav">
        
          <li class="nav-item">
            <a class="nav-link" href="https://github.com/sdv-dev/SDV" target="_blank" rel="noopener">
              <span><i class="fab fa-github-square"></i></span>
            </a>
          </li>
        
        
          <li class="nav-item">
            <a class="nav-link" href="https://twitter.com/sdv_dev" target="_blank" rel="noopener">
              <span><i class="fab fa-twitter-square"></i></span>
            </a>
          </li>
        
        
          <li class="nav-item">
            <a class="nav-link" href="https://bit.ly/sdv-slack-invite" target="_blank" rel="noopener">
              <img class="nav-icon-img" src="../../_static/slack-32.png">
            </a>
          </li>
        
      </ul>
    </div>
</div>

    </nav>
    

    <div class="container-xl">
      <div class="row">
          
          <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <div class="bd-toc-item active">
    
    <ul class="nav bd-sidenav">
        
        
        
        
          
            
                <li class="active">
                    <a href="index.html">Single Table Data</a>
                    <ul>
                    
                        
                            <li class="">
                                <a href="data_description.html">Data Description</a>
                            </li>
                        

                    
                        
                            <li class="">
                                <a href="models.html">Models</a>
                            </li>
                        

                    
                        
                            <li class="active">
                                <a href="constraints.html">Constraints</a>
                                <ul>
                                
                                    <li class="active">
                                        <a href="">Inputting Business Logic Using Constraints</a>
                                    </li>
                                
                                    <li class="">
                                        <a href="custom_constraints.html">Custom Constraints</a>
                                    </li>
                                
                                </ul>
                            </li>
                        

                    
                    </ul>
                </li>
            
          
            
                <li class="">
                    <a href="../relational/index.html">Relational Data</a>
                </li>
            
          
            
                <li class="">
                    <a href="../timeseries/index.html">Timeseries Data</a>
                </li>
            
          
            
                <li class="">
                    <a href="../evaluation/index.html">Synthetic Data Evaluation</a>
                </li>
            
          
            
                <li class="">
                    <a href="../benchmarking/index.html">Benchmarking Framework</a>
                </li>
            
          
        
        
        
        
        
        
        
        
      </ul>
  
  </nav>
          </div>
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
              
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="nav section-nav flex-column">
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#load-a-tabular-demo" class="nav-link">Load a Tabular Demo</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#predefined-constraints" class="nav-link">Predefined Constraints</a><ul class="nav section-nav flex-column">
                
        <li class="nav-item toc-entry toc-h3">
            <a href="#unique" class="nav-link">Unique</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#fixedcombinations" class="nav-link">FixedCombinations</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#inequality" class="nav-link">Inequality</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#scalarinequality" class="nav-link">ScalarInequality</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#positive-and-negative" class="nav-link">Positive and Negative</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#onehotencoding" class="nav-link">OneHotEncoding</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#fixedincrements" class="nav-link">FixedIncrements</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#range" class="nav-link">Range</a>
        </li>
    
        <li class="nav-item toc-entry toc-h3">
            <a href="#scalarrange" class="nav-link">ScalarRange</a>
        </li>
    
            </ul>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#applying-the-constraints" class="nav-link">Applying the Constraints</a>
        </li>
    
        <li class="nav-item toc-entry toc-h2">
            <a href="#faqs" class="nav-link">FAQs</a>
        </li>
    
    </ul>
</nav>


              
          </div>
          

          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <blockquote>
<div><div class="admonition danger">
<p class="admonition-title">Danger</p>
<p>You are looking at the documentation for an older version of the SDV! We are no
longer supporting or maintaining this version of the software</p>
<p><a class="reference external" href="https://docs.sdv.dev/sdv/">Click here to go to the new docs pages.</a></p>
</div>
</div></blockquote>
<div class="section" id="inputting-business-logic-using-constraints">
<span id="handling-constraints"></span><h1>Inputting Business Logic Using Constraints<a class="headerlink" href="#inputting-business-logic-using-constraints" title="Permalink to this headline">¶</a></h1>
<p>Do you have rules in your dataset that every row in the data must follow? You can use constraints
to describe business logic to any of the SDV single table models.</p>
<p>The SDV has predefined constraints that are commonly found in datasets. For example:</p>
<ul class="simple">
<li><p>Fixing combinations. Your table might have two different columns for city and country. The
values in those columns should not be shuffled because that would result in incorrect locations
(eg. Paris USA or London Italy).</p></li>
<li><p>Comparing inequalities. Your table might have two different columns for an employee’s start_date
and end_date that are related to each other: The start_date must always come before the end_date.</p></li>
</ul>
<p>In this guide, we’ll walk through the usage of each predefined constraint.</p>
<div class="section" id="load-a-tabular-demo">
<h2>Load a Tabular Demo<a class="headerlink" href="#load-a-tabular-demo" title="Permalink to this headline">¶</a></h2>
<p>To illustrate some of the constraints, let’s load a small table that contains some details
about employees from several companies.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="kn">from</span> <span class="nn">sdv.demo</span> <span class="kn">import</span> <span class="n">load_tabular_demo</span>

<span class="gp">In [2]: </span><span class="n">employees</span> <span class="o">=</span> <span class="n">load_tabular_demo</span><span class="p">()</span>

<span class="gp">In [3]: </span><span class="n">employees</span>
<span class="gh">Out[3]: </span>
<span class="go">     company     department  employee_id  age  age_when_joined  years_in_the_company     salary  annual_bonus  prior_years_experience  full_time  part_time  contractor</span>
<span class="go">0       Pear          Sales            1   38               34                     4   50000.00      13500.00                       5        1.0        0.0         0.0</span>
<span class="go">1       Pear         Design            5   44               38                     6  144288.40      10854.68                       2        0.0        0.0         1.0</span>
<span class="go">2    Glasses             AI            1   32               28                     4   57500.00       9000.00                       1        1.0        0.0         0.0</span>
<span class="go">3    Glasses  Search Engine            7   43               34                     9  118249.81       8758.30                       1        0.0        0.0         1.0</span>
<span class="go">4   Cheerper        BigData            6   32               23                     9  144000.00      13000.00                       4        0.0        1.0         0.0</span>
<span class="go">5   Cheerper        Support           11   32               30                     2  134000.00      24000.00                       1        0.0        1.0         0.0</span>
<span class="go">6       Pear          Sales           28   30               28                     2   79500.00      21000.00                       2        1.0        0.0         0.0</span>
<span class="go">7       Pear         Design           75   37               28                     9   82636.62       5790.74                       1        0.0        0.0         1.0</span>
<span class="go">8    Glasses             AI           33   35               33                     2  110000.00      11500.00                       1        1.0        0.0         0.0</span>
<span class="go">9    Glasses  Search Engine           56   45               38                     7   89208.13       8551.22                       4        0.0        0.0         1.0</span>
<span class="go">10  Cheerper        BigData           42   32               25                     7  114500.00      16500.00                       3        0.0        1.0         0.0</span>
<span class="go">11  Cheerper        Support           80   35               31                     4   74500.00      24000.00                       3        0.0        1.0         0.0</span>
</pre></div>
</div>
<p>This table contains a few rules that can be written as predefined constraints. We’ll use it as an
example when describing the constraints.</p>
</div>
<div class="section" id="predefined-constraints">
<h2>Predefined Constraints<a class="headerlink" href="#predefined-constraints" title="Permalink to this headline">¶</a></h2>
<div class="section" id="unique">
<h3>Unique<a class="headerlink" href="#unique" title="Permalink to this headline">¶</a></h3>
<p>The Unique constraint enforces that the values in column (or set of columns) are unique within the
entire table.</p>
<p>In our demo table, there is a Unique constraint: Within a company, all the employee ids must be
unique.</p>
<p>Enforce this by creating a Unique constraint. This object accepts a list of 1 or more column names.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [4]: </span><span class="kn">from</span> <span class="nn">sdv.constraints</span> <span class="kn">import</span> <span class="n">Unique</span>

<span class="gp">In [5]: </span><span class="n">unique_employee_id_company_constraint</span> <span class="o">=</span> <span class="n">Unique</span><span class="p">(</span>
<span class="gp">   ...: </span>    <span class="n">column_names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;employee_id&#39;</span><span class="p">,</span> <span class="s1">&#39;company&#39;</span><span class="p">]</span>
<span class="gp">   ...: </span><span class="p">)</span>
<span class="gp">   ...: </span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The SDV already ensures that primary keys are unique in the dataset. You do not need to add
a Unique constraint on these columns.</p>
</div>
</div>
<div class="section" id="fixedcombinations">
<h3>FixedCombinations<a class="headerlink" href="#fixedcombinations" title="Permalink to this headline">¶</a></h3>
<p>The FixedCombinations constraint enforces that the combinations between a set of columns are fixed.
That is, no other permutations or shuffling is allowed other than what’s already observed in the
real data.</p>
<p>In our demo table, there is a FixedCombinations constraint: Each company has a fixed set of
departments. The company and department values should not be shuffled in the synthetic data.</p>
<p>Enforce this by creating a FixedCombinations constraint. This object accepts a list of 2 or
more column names.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [6]: </span><span class="kn">from</span> <span class="nn">sdv.constraints</span> <span class="kn">import</span> <span class="n">FixedCombinations</span>

<span class="gp">In [7]: </span><span class="n">fixed_company_department_constraint</span> <span class="o">=</span> <span class="n">FixedCombinations</span><span class="p">(</span>
<span class="gp">   ...: </span>    <span class="n">column_names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;company&#39;</span><span class="p">,</span> <span class="s1">&#39;department&#39;</span><span class="p">]</span>
<span class="gp">   ...: </span><span class="p">)</span>
<span class="gp">   ...: </span>
</pre></div>
</div>
</div>
<div class="section" id="inequality">
<h3>Inequality<a class="headerlink" href="#inequality" title="Permalink to this headline">¶</a></h3>
<p>The Inequality constraint enforces an inequality relationship between a pair of columns.
For every row, the value in one column must be greater than a value in another.</p>
<p>In our demo table, there is an Inequality constraint: The current age of an employee must be
greater than or equal to the age they were when they joined.</p>
<p>Enforce this by creating an Inequality constraint. This object accepts column names for the high
and low columns. The columns can be either numerical or datetime.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [8]: </span><span class="kn">from</span> <span class="nn">sdv.constraints</span> <span class="kn">import</span> <span class="n">Inequality</span>

<span class="gp">In [9]: </span><span class="n">age_gt_age_when_joined_constraint</span> <span class="o">=</span> <span class="n">Inequality</span><span class="p">(</span>
<span class="gp">   ...: </span>    <span class="n">low_column_name</span><span class="o">=</span><span class="s1">&#39;age_when_joined&#39;</span><span class="p">,</span>
<span class="gp">   ...: </span>    <span class="n">high_column_name</span><span class="o">=</span><span class="s1">&#39;age&#39;</span>
<span class="gp">   ...: </span><span class="p">)</span>
<span class="gp">   ...: </span>
</pre></div>
</div>
</div>
<div class="section" id="scalarinequality">
<h3>ScalarInequality<a class="headerlink" href="#scalarinequality" title="Permalink to this headline">¶</a></h3>
<p>The ScalarInequality constraint enforces that all values in a column are greater or less than a
fixed (scalar) value. That is, it enforces a lower or upper bound to the synthetic data.</p>
<p>In our demo table, we can define a ScalarInequality constraint: All employees must be 18 or older.</p>
<p>Enforce this by creating a ScalarInequality constraint. This object accepts a numerical or
datetime column name and value. It also expects an inequality relation that must be one of
“&gt;”, “&gt;=”, “&lt;” or “&lt;=”.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [10]: </span><span class="kn">from</span> <span class="nn">sdv.constraints</span> <span class="kn">import</span> <span class="n">ScalarInequality</span>

<span class="gp">In [11]: </span><span class="n">age_gt_18</span> <span class="o">=</span> <span class="n">ScalarInequality</span><span class="p">(</span>
<span class="gp">   ....: </span>    <span class="n">column_name</span><span class="o">=</span><span class="s1">&#39;age&#39;</span><span class="p">,</span>
<span class="gp">   ....: </span>    <span class="n">relation</span><span class="o">=</span><span class="s1">&#39;&gt;=&#39;</span><span class="p">,</span>
<span class="gp">   ....: </span>    <span class="n">value</span><span class="o">=</span><span class="mi">18</span>
<span class="gp">   ....: </span><span class="p">)</span>
<span class="gp">   ....: </span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All SDV tabular models have an enforce_min_max_values parameter that you set to enforce bounds
on all columns. This constraint is redundant if you set this model parameter.</p>
</div>
</div>
<div class="section" id="positive-and-negative">
<h3>Positive and Negative<a class="headerlink" href="#positive-and-negative" title="Permalink to this headline">¶</a></h3>
<p>The Positive and Negative constraints are shortcuts to the ScalarInequality constraint when
the column’s values must be &gt;0 or &lt;0.</p>
<p>In our demo table, we can define a Positive constraint: All employee ages must be positive.</p>
<p>Enforce this by creating a Positive constraint. This object accepts a numerical column name.
(The Negative constraint works the same way.)</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [12]: </span><span class="kn">from</span> <span class="nn">sdv.constraints</span> <span class="kn">import</span> <span class="n">Positive</span>

<span class="gp">In [13]: </span><span class="n">age_positive</span> <span class="o">=</span> <span class="n">Positive</span><span class="p">(</span><span class="n">column_name</span><span class="o">=</span><span class="s1">&#39;age&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All SDV tabular models have an enforce_min_max_value parameter that you set to enforce bounds
on all columns. This constraint is redundant if you set this model parameter.</p>
</div>
</div>
<div class="section" id="onehotencoding">
<h3>OneHotEncoding<a class="headerlink" href="#onehotencoding" title="Permalink to this headline">¶</a></h3>
<p>The OneHotEncoding constraint enforces that a set of columns follow a
<a class="reference external" href="https://en.wikipedia.org/wiki/One-hot#Machine_learning_and_statistics">one hot encoding scheme</a>
. That is, exactly one of the columns must contain a value of 1 while all the others must be 0.</p>
<p>In our demo table, we have a OneHotEncoding constraint: An employee can only be one of: full time,
part time or contractor. That is, only 1 of these columns must be 1 while the others must be a 0.</p>
<p>Enforce this by creating a OneHotEncoding constraint. The object accepts a list of column names
that, together, are part of the one hot encoding scheme.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [14]: </span><span class="kn">from</span> <span class="nn">sdv.constraints</span> <span class="kn">import</span> <span class="n">OneHotEncoding</span>

<span class="gp">In [15]: </span><span class="n">job_category_constraint</span> <span class="o">=</span> <span class="n">OneHotEncoding</span><span class="p">(</span>
<span class="gp">   ....: </span>    <span class="n">column_names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;full_time&#39;</span><span class="p">,</span> <span class="s1">&#39;part_time&#39;</span><span class="p">,</span> <span class="s1">&#39;contractor&#39;</span><span class="p">]</span>
<span class="gp">   ....: </span><span class="p">)</span>
<span class="gp">   ....: </span>
</pre></div>
</div>
</div>
<div class="section" id="fixedincrements">
<h3>FixedIncrements<a class="headerlink" href="#fixedincrements" title="Permalink to this headline">¶</a></h3>
<p>The FixedIncrements constraint enforces that all the values in a column are increments of a
particular, fixed value. That is, all the data must be divisible by the value.</p>
<p>We do not have a FixedIncrements constraint in our demo table. But we can imagine a table where
all the salary values must be divisible by 500.</p>
<p>Enforce this by creating a FixedIncrements constraint. This object accepts a numerical column
name and an increment value that must be an integer greater than 1.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [16]: </span><span class="kn">from</span> <span class="nn">sdv.constraints</span> <span class="kn">import</span> <span class="n">FixedIncrements</span>

<span class="go"># this constraint does not actually exist in the demo dataset</span>
<span class="gp">In [17]: </span><span class="n">salary_divisble_by_500</span> <span class="o">=</span> <span class="n">FixedIncrements</span><span class="p">(</span>
<span class="gp">   ....: </span>    <span class="n">column_name</span><span class="o">=</span><span class="s1">&#39;salary&#39;</span><span class="p">,</span>
<span class="gp">   ....: </span>    <span class="n">increment_value</span><span class="o">=</span><span class="mi">500</span>
<span class="gp">   ....: </span><span class="p">)</span>
<span class="gp">   ....: </span>
</pre></div>
</div>
</div>
<div class="section" id="range">
<h3>Range<a class="headerlink" href="#range" title="Permalink to this headline">¶</a></h3>
<p>The Range constraint enforces that for all rows, the value of one of the columns is bounded by
the values in the other two columns.</p>
<p>We do not have a Range constraint in our demo table. But we can imagine a table where an
employee’s age is bounded by the age when they first started working and an age when they will
retire.</p>
<p>Enforce this by creating a Range constraint. This object accepts high, middle and low column names.
The columns can be either numerical or datetime.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [18]: </span><span class="kn">from</span> <span class="nn">sdv.constraints</span> <span class="kn">import</span> <span class="n">Range</span>

<span class="go"># this constraint does not actually exist in the demo dataset</span>
<span class="gp">In [19]: </span><span class="n">age_btwn_joined_retirement</span> <span class="o">=</span> <span class="n">Range</span><span class="p">(</span>
<span class="gp">   ....: </span>    <span class="n">low_column_name</span><span class="o">=</span><span class="s1">&#39;age_started_working&#39;</span><span class="p">,</span>
<span class="gp">   ....: </span>    <span class="n">middle_column_name</span><span class="o">=</span><span class="s1">&#39;age_today&#39;</span><span class="p">,</span>
<span class="gp">   ....: </span>    <span class="n">high_column_name</span><span class="o">=</span><span class="s1">&#39;age_when_retiring&#39;</span>
<span class="gp">   ....: </span><span class="p">)</span>
<span class="gp">   ....: </span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This constraint assumes strict bounds between the low, middle and high column names.
That is: low &lt; middle &lt; high. You can express other business logic using a multiple
Inequality and ScalarInequality constraints.</p>
</div>
</div>
<div class="section" id="scalarrange">
<h3>ScalarRange<a class="headerlink" href="#scalarrange" title="Permalink to this headline">¶</a></h3>
<p>The ScalarRange constraint enforces that all the values in a column are in between two known,
fixed values. That is, it enforces upper and lower bounds to the data.</p>
<p>In our demo table, we can define a ScalarRange constraint: All employees must be between the
ages of 18 and 100.</p>
<p>Enforce this by creating a ScalarRange constraint. This object accepts a numerical or datetime
column name and the low and high values. It also accepts a boolean that describes whether the
ranges are strict (exclusive) or not (inclusive).</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [20]: </span><span class="kn">from</span> <span class="nn">sdv.constraints</span> <span class="kn">import</span> <span class="n">ScalarRange</span>

<span class="gp">In [21]: </span><span class="n">age_btwn_18_100</span> <span class="o">=</span> <span class="n">ScalarRange</span><span class="p">(</span>
<span class="gp">   ....: </span>    <span class="n">column_name</span><span class="o">=</span><span class="s1">&#39;age&#39;</span><span class="p">,</span>
<span class="gp">   ....: </span>    <span class="n">low_value</span><span class="o">=</span><span class="mi">18</span><span class="p">,</span>
<span class="gp">   ....: </span>    <span class="n">high_value</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
<span class="gp">   ....: </span>    <span class="n">strict_boundaries</span><span class="o">=</span><span class="kc">False</span>
<span class="gp">   ....: </span><span class="p">)</span>
<span class="gp">   ....: </span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All SDV tabular models have an enforce_min_max_values parameter that you set to enforce bounds
on all columns. This constraint is redundant if you set this model parameter.</p>
</div>
</div>
</div>
<div class="section" id="applying-the-constraints">
<h2>Applying the Constraints<a class="headerlink" href="#applying-the-constraints" title="Permalink to this headline">¶</a></h2>
<p>Once you have defined the constraints, you can use them in any SDV single table model
(TabularPreset, GaussianCopula, CopulaGAN, CTGAN and TVAE). Use the constraints parameter
to pass in the objects a list.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [22]: </span><span class="kn">from</span> <span class="nn">sdv.tabular</span> <span class="kn">import</span> <span class="n">GaussianCopula</span>

<span class="gp">In [23]: </span><span class="n">constraints</span> <span class="o">=</span> <span class="p">[</span>
<span class="gp">   ....: </span>    <span class="n">unique_employee_id_company_constraint</span><span class="p">,</span>
<span class="gp">   ....: </span>    <span class="n">fixed_company_department_constraint</span><span class="p">,</span>
<span class="gp">   ....: </span>    <span class="n">age_gt_age_when_joined_constraint</span><span class="p">,</span>
<span class="gp">   ....: </span>    <span class="n">job_category_constraint</span><span class="p">,</span>
<span class="gp">   ....: </span>    <span class="n">age_btwn_18_100</span>
<span class="gp">   ....: </span><span class="p">]</span>
<span class="gp">   ....: </span>

<span class="gp">In [24]: </span><span class="n">model</span> <span class="o">=</span> <span class="n">GaussianCopula</span><span class="p">(</span><span class="n">constraints</span><span class="o">=</span><span class="n">constraints</span><span class="p">,</span> <span class="n">enforce_min_max_values</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p>Then you can fit the model using the real data. During this process, the SDV ensures that the
model learns the constraints.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [25]: </span><span class="n">model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">employees</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The constraints must accurately describe the data. Constraints are business rules that must be
followed by every row of your data. If the real data does not fully meet the constraint, the
model will not be able to learn it well. The SDV will throw an error.</p>
</div>
<p>Finally, you can sample synthetic data. Observe that every row in the synthetic data adheres to
the constraints.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [26]: </span><span class="n">synthetic_data</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">num_rows</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

<span class="gp">In [27]: </span><span class="n">synthetic_data</span>
<span class="gh">Out[27]: </span>
<span class="go">    company department  employee_id  age  age_when_joined  years_in_the_company     salary  annual_bonus  prior_years_experience  full_time  part_time  contractor</span>
<span class="go">0      Pear     Design           46   41               32                     9   74238.73       7215.53                       3        0.0        0.0         1.0</span>
<span class="go">1  Cheerper    BigData            3   30               27                     3  108530.95      20192.45                       1        1.0        0.0         0.0</span>
<span class="go">2      Pear     Design           14   36               33                     3   99520.93      11553.38                       2        1.0        0.0         0.0</span>
<span class="go">3      Pear      Sales           13   34               29                     6   67378.97      11698.18                       3        1.0        0.0         0.0</span>
<span class="go">4      Pear      Sales           27   31               27                     4   58623.91      10096.44                       3        1.0        0.0         0.0</span>
<span class="go">5  Cheerper    BigData           34   33               29                     5  117147.07      20164.54                       3        0.0        1.0         0.0</span>
<span class="go">6  Cheerper    BigData           39   41               32                     9  128722.45       8629.55                       2        0.0        1.0         0.0</span>
<span class="go">7      Pear      Sales           17   33               26                     8   94179.58       8671.02                       4        1.0        0.0         0.0</span>
<span class="go">8      Pear      Sales           29   37               33                     5  101665.24       6569.02                       2        1.0        0.0         0.0</span>
<span class="go">9   Glasses         AI           47   42               38                     5   64008.24      10238.62                       1        1.0        0.0         0.0</span>
</pre></div>
</div>
</div>
<div class="section" id="faqs">
<h2>FAQs<a class="headerlink" href="#faqs" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>Constraints may slow down the synthetic data model &amp; leak privacy.</strong> Before adding a
constraint to your model, carefully consider whether it is necessary.  Here are a few questions
to ask:</p>
<ul class="simple">
<li><p>How do I plan to use the synthetic data? Without the constraint, the rule may still be valid
a majority of the time. Only add the constraint if you require 100% adherence.</p></li>
<li><p>Who do I plan to share the synthetic data with? Consider whether they will be able to use
the business rule to uncover sensitive information about the real data.</p></li>
<li><p>How did the rule come to be? In some cases, there may be other data sources that are present
without extra columns and rules.</p></li>
</ul>
<p>In the ideal case, there are only a handful constraints you are applying to your model.</p>
</div>
<details class="summary-when-do-constraints-affect-the-modeling-sampling-performance">
<summary>When do constraints affect the modeling & sampling performance?</summary><p>In most cases, the time it takes to fit the model and sample synthetic data should not be
significantly affected if you add a few constraints. However, there are certain scenarios
where you may notice a slow-down:</p>
<ul class="simple">
<li><p>You have a large number of constraints that overlap. That is, multiple constraints are
referencing the same column(s) in the data.</p></li>
<li><p>Your constrained data has a high cardinality. For example, you have a categorical column
with hundreds of possible categories that you are using in a FixedCombinations constraint.</p></li>
<li><p>You are conditional sampling on a constrained column. This requires some special processing
and it may not always be possible to efficiently create conditional synthetic data.</p></li>
</ul>
<p>For any questions or feature requests related to performance, please create an issue describing
your data, constraints and sampling needs.</p>
</details><details class="summary-what-happened-to-rounding-and-columnformula">
<summary>What happened to Rounding and ColumnFormula?</summary><p>Rounding and ColumnFormula constraints were available in older versions of the SDV. These
constraints are no longer included as predefined constraints because there are other ways
to achieve the same logic:</p>
<ul class="simple">
<li><p><strong>Rounding</strong>: All SDV single table models contain a ‘rounding’ parameter. By default, they
learn the number of decimal digits in your data and enforce that the synthetic data has the
same.</p></li>
<li><p><strong>ColumnFormula</strong>: In this version of the SDV, you can implement a formula as a
CustomConstraint. See the Defining Custom Constraints guide for more details.</p></li>
</ul>
</details><details class="summary-why-am-i-getting-a-constraintsnotmeterror-when-i-try-to-fit-my-data">
<summary>Why am I getting a ConstraintsNotMetError when I try to fit my data?</summary><p>A constraint should describe a rule that is true for every row in your real data. If any rows
in the real data violate the rule, the SDV will throw a ConstraintsNotMetError. Since the
constraint is not true in your real data, the model will not be able to learn it.</p>
<p>If you see this error, you have two options:</p>
<ul class="simple">
<li><p>(recommended) Remove the constraint. This ensures the model learns patterns that exist in the
real data. You can use conditional sampling later to generate synthetic data with specific
values.</p></li>
<li><p>Clean your input dataset. If you remove the violative rows in the real data, then you will be
able to apply the constraint. This is not recommended because even if the model can learn the
constraint, it is not truly representative of the full, original dataset.</p></li>
</ul>
</details><details class="summary-how-does-the-sdv-handle-the-constraints">
<summary>How does the SDV handle the constraints?</summary><p>Under-the-hood, the SDV uses a combination of strategies to ensure that the synthetic data
always follows the constraints. These strategies are:</p>
<ol class="arabic simple">
<li><p><strong>Transformation</strong>: Most of the time, it’s possible to transform the data in a way that
guarantees the models will be able to learn the constraint. This is paired with a reverse
transformation to ensure the synthetic data looks like the original.</p></li>
<li><p><strong>Reject Sampling</strong>: Another strategy is to model and sample synthetic data as usual, and
then throw away any rows in the synthetic data that violate the constraints.</p></li>
</ol>
<p>Transformation is the most efficient strategy, but it is not always possible to use. For
example, multiple constraints might be attempting to transform the same column, or the
logic itself may not be possible to achieve through transformation.</p>
<p>In such cases, the SDV will fall back to using reject sampling. You’ll get a warning when
this happens. Reject sampling may slow down the sampling process but there will be no other
effect on the synthetic data’s quality or validity.</p>
</details></div>
</div>


              </div>
              
              
              <div class='prev-next-bottom'>
                
    <a class='left-prev' id="prev-link" href="constraints.html" title="previous page">Constraints</a>
    <a class='right-next' id="next-link" href="custom_constraints.html" title="next page">Custom Constraints</a>

              </div>
              
          </main>
          

      </div>
    </div>

    
  <script src="../../_static/js/index.d3f166471bb80abb5163.js"></script>


    
    <!-- Google Analytics -->
    <script>
      window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
      ga('create', 'UA-180602145-3', 'auto');
      ga('set', 'anonymizeIp', true);
      ga('send', 'pageview');
    </script>
    <script async src='https://www.google-analytics.com/analytics.js'></script>
    <!-- End Google Analytics -->
    <footer class="footer mt-5 mt-md-0">
  <div class="container">
    <p>
          &copy; Copyright 2022, DataCebo, Inc..<br/>
        Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.2.1.<br/>
    </p>
  </div>
</footer>
  </body>
</html>